/*!
  backstage.js v0.0.1
  https://github.com/sushat4692/backstage.js#readme
  Released under the MIT License.
*/
var Backstage=function(){"use strict";var e=function(){var e=new Set;return{on:function(r){e.add(r)},off:function(r){e.delete(r)},offAll:function(){e.clear()},emit:function(r){e.forEach((function(e){return e(r)}))}}},r=function(e,r){var n=e.length,t=[];return e.forEach((function(e){var o=function(e,r,n,t){var o=0,a=0,c=!1;return{start:function(){var f=new XMLHttpRequest;f.open("get",e,!0),f.responseType="blob",f.onprogress=function(e){e.lengthComputable&&(c=!0,o=e.total,a=e.loaded,r())},f.onload=function(e){n()},f.onerror=function(e){t()},f.send()},total:function(){return o},current:function(){return a},ready:function(){return c}}}(e,(function(){var e=t.reduce((function(e,r){return e.total+=r.total(),e.current+=r.current(),e.ready=e.ready&&r.ready(),e}),{total:0,current:0,per:0,ready:!0});e.ready&&(e.per=e.current/e.total,r({key:"progress",value:e}))}),(function(){(n-=1)<=0&&r({key:"complete",value:{}})}),(function(){r({key:"error",value:new Error("error")})}));t.push(o)})),{start:function(){t.forEach((function(e){e.start()}))}}};return function(n){var t,o,a,c=(t=e(),o=e(),a=e(),{on:function(e){switch(e.key){case"progress":t.on(e.handler);break;case"error":o.on(e.handler);break;case"complete":a.on(e.handler)}},off:function(e){switch(e.key){case"progress":t.off(e.handler);break;case"error":o.off(e.handler);break;case"complete":a.off(e.handler)}},offAll:function(e){switch(e){case"progress":t.offAll();break;case"error":o.offAll();break;case"complete":a.offAll()}},emit:function(e){switch(e.key){case"progress":return t.emit(e.value);case"error":return o.emit(e.value);case"complete":return a.emit(e.value)}}});return{on:c.on,off:c.off,offAll:c.offAll,start:r(n,c.emit).start}}}();
