/*!
  backstage.js v0.0.1
  https://github.com/sushat4692/backstage.js#readme
  Released under the MIT License.
*/
'use strict';

var eventmit = require('eventmit');

var prepareEvent = function () {
    var progress = eventmit.eventmit();
    var error = eventmit.eventmit();
    var file_complete = eventmit.eventmit();
    var complete = eventmit.eventmit();
    var on = function (key, emitter) {
        switch (key) {
            case "progress":
                progress.on(emitter);
                break;
            case "error":
                error.on(emitter);
                break;
            case "file_complete":
                file_complete.on(emitter);
                break;
            case "complete":
                complete.on(emitter);
                break;
        }
    };
    var off = function (key, emitter) {
        switch (key) {
            case "progress":
                progress.off(emitter);
                break;
            case "error":
                error.off(emitter);
                break;
            case "file_complete":
                file_complete.off(emitter);
                break;
            case "complete":
                complete.off(emitter);
                break;
        }
    };
    var offAll = function (key) {
        switch (key) {
            case "progress":
                progress.offAll();
                break;
            case "error":
                error.offAll();
                break;
            case "file_complete":
                file_complete.offAll();
                break;
            case "complete":
                complete.offAll();
                break;
        }
    };
    var emit = function (key, value) {
        switch (key) {
            case "progress":
                return progress.emit(value);
            case "error":
                return error.emit(value);
            case "file_complete":
                return file_complete.emit(value);
            case "complete":
                return complete.emit(value);
        }
    };
    return {
        on: on,
        off: off,
        offAll: offAll,
        emit: emit,
    };
};

var SingleLoader = function (file, progress, complete, error) {
    var _total = 0;
    var _current = 0;
    var _ready = false;
    return {
        start: function () {
            var xhr = new XMLHttpRequest();
            xhr.open("get", file, true);
            xhr.responseType = "blob";
            xhr.onprogress = function (e) {
                if (!e.lengthComputable) {
                    return;
                }
                _ready = true;
                _total = e.total;
                _current = e.loaded;
                progress();
            };
            xhr.onload = function (e) {
                complete(file, _total);
            };
            xhr.onerror = function (e) {
                error();
            };
            xhr.send();
        },
        total: function () {
            return _total;
        },
        current: function () {
            return _current;
        },
        ready: function () {
            return _ready;
        },
    };
};
var Loader = function (files, emit) {
    var fileLength = files.length;
    var loaders = [];
    var fileResults = files.map(function (file) { return ({ file: file, size: 0 }); });
    files.forEach(function (file) {
        var loader = SingleLoader(file, function () {
            var ready = true;
            var result = loaders.reduce(function (acc, cur) {
                acc.total += cur.total();
                acc.current += cur.current();
                ready = ready && cur.ready();
                return acc;
            }, { total: 0, current: 0, per: 0 });
            if (ready) {
                result.per = result.current / result.total;
                emit("progress", result);
            }
        }, function (file, size) {
            emit("file_complete", { file: file, size: size });
            var total = 0;
            fileResults = fileResults.map(function (res) {
                var _size = file === res.file ? size : res.size;
                total += _size;
                return {
                    file: res.file,
                    size: _size,
                };
            });
            fileLength -= 1;
            if (fileLength <= 0) {
                emit("complete", { total: total, files: fileResults });
            }
        }, function () {
            emit("error", new Error("error"));
        });
        loaders.push(loader);
    });
    return {
        start: function () {
            loaders.forEach(function (loader) {
                loader.start();
            });
        },
    };
};

var Backstage = function (files) {
    var _a = prepareEvent(), on = _a.on, off = _a.off, offAll = _a.offAll, emit = _a.emit;
    var loader = Loader(files, emit);
    return {
        on: on,
        off: off,
        offAll: offAll,
        start: loader.start,
    };
};

exports.Backstage = Backstage;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9FdmVudC50cyIsIi4uLy4uL3NyYy9Mb2FkZXIudHMiLCIuLi8uLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXZlbnRtaXQsIEV2ZW50bWl0SGFuZGxlciB9IGZyb20gXCJldmVudG1pdFwiO1xuaW1wb3J0IHsgRXZlbnRFbWl0S2V5LCBFdmVudEVtaXRUeXBlIH0gZnJvbSBcIi4vdHlwZVwiO1xuXG5leHBvcnQgY29uc3QgcHJlcGFyZUV2ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2dyZXNzID0gZXZlbnRtaXQ8RXZlbnRFbWl0S2V5PFwicHJvZ3Jlc3NcIj4+KCk7XG4gICAgY29uc3QgZXJyb3IgPSBldmVudG1pdDxFdmVudEVtaXRLZXk8XCJlcnJvclwiPj4oKTtcbiAgICBjb25zdCBmaWxlX2NvbXBsZXRlID0gZXZlbnRtaXQ8RXZlbnRFbWl0S2V5PFwiZmlsZV9jb21wbGV0ZVwiPj4oKTtcbiAgICBjb25zdCBjb21wbGV0ZSA9IGV2ZW50bWl0PEV2ZW50RW1pdEtleTxcImNvbXBsZXRlXCI+PigpO1xuXG4gICAgY29uc3Qgb24gPSA8SyBleHRlbmRzIEV2ZW50RW1pdFR5cGU+KFxuICAgICAgICBrZXk6IEssXG4gICAgICAgIGVtaXR0ZXI6IEV2ZW50bWl0SGFuZGxlcjxFdmVudEVtaXRLZXk8Sz4+XG4gICAgKSA9PiB7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICBjYXNlIFwicHJvZ3Jlc3NcIjpcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5vbihcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlciBhcyBFdmVudG1pdEhhbmRsZXI8RXZlbnRFbWl0S2V5PFwicHJvZ3Jlc3NcIj4+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgIGVycm9yLm9uKGVtaXR0ZXIgYXMgRXZlbnRtaXRIYW5kbGVyPEV2ZW50RW1pdEtleTxcImVycm9yXCI+Pik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZmlsZV9jb21wbGV0ZVwiOlxuICAgICAgICAgICAgICAgIGZpbGVfY29tcGxldGUub24oXG4gICAgICAgICAgICAgICAgICAgIGVtaXR0ZXIgYXMgRXZlbnRtaXRIYW5kbGVyPEV2ZW50RW1pdEtleTxcImZpbGVfY29tcGxldGVcIj4+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjb21wbGV0ZVwiOlxuICAgICAgICAgICAgICAgIGNvbXBsZXRlLm9uKFxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyIGFzIEV2ZW50bWl0SGFuZGxlcjxFdmVudEVtaXRLZXk8XCJjb21wbGV0ZVwiPj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG9mZiA9IDxLIGV4dGVuZHMgRXZlbnRFbWl0VHlwZT4oXG4gICAgICAgIGtleTogSyxcbiAgICAgICAgZW1pdHRlcjogRXZlbnRtaXRIYW5kbGVyPEV2ZW50RW1pdEtleTxLPj5cbiAgICApID0+IHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJwcm9ncmVzc1wiOlxuICAgICAgICAgICAgICAgIHByb2dyZXNzLm9mZihcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlciBhcyBFdmVudG1pdEhhbmRsZXI8RXZlbnRFbWl0S2V5PFwicHJvZ3Jlc3NcIj4+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgIGVycm9yLm9mZihlbWl0dGVyIGFzIEV2ZW50bWl0SGFuZGxlcjxFdmVudEVtaXRLZXk8XCJlcnJvclwiPj4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImZpbGVfY29tcGxldGVcIjpcbiAgICAgICAgICAgICAgICBmaWxlX2NvbXBsZXRlLm9mZihcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlciBhcyBFdmVudG1pdEhhbmRsZXI8RXZlbnRFbWl0S2V5PFwiZmlsZV9jb21wbGV0ZVwiPj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNvbXBsZXRlXCI6XG4gICAgICAgICAgICAgICAgY29tcGxldGUub2ZmKFxuICAgICAgICAgICAgICAgICAgICBlbWl0dGVyIGFzIEV2ZW50bWl0SGFuZGxlcjxFdmVudEVtaXRLZXk8XCJjb21wbGV0ZVwiPj5cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IG9mZkFsbCA9IChrZXk6IEV2ZW50RW1pdFR5cGUpID0+IHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJwcm9ncmVzc1wiOlxuICAgICAgICAgICAgICAgIHByb2dyZXNzLm9mZkFsbCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVycm9yXCI6XG4gICAgICAgICAgICAgICAgZXJyb3Iub2ZmQWxsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZmlsZV9jb21wbGV0ZVwiOlxuICAgICAgICAgICAgICAgIGZpbGVfY29tcGxldGUub2ZmQWxsKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY29tcGxldGVcIjpcbiAgICAgICAgICAgICAgICBjb21wbGV0ZS5vZmZBbGwoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBlbWl0ID0gPEsgZXh0ZW5kcyBFdmVudEVtaXRUeXBlPihrZXk6IEssIHZhbHVlOiBFdmVudEVtaXRLZXk8Sz4pID0+IHtcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJwcm9ncmVzc1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9ncmVzcy5lbWl0KHZhbHVlIGFzIEV2ZW50RW1pdEtleTxcInByb2dyZXNzXCI+KTtcbiAgICAgICAgICAgIGNhc2UgXCJlcnJvclwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5lbWl0KHZhbHVlIGFzIEV2ZW50RW1pdEtleTxcImVycm9yXCI+KTtcbiAgICAgICAgICAgIGNhc2UgXCJmaWxlX2NvbXBsZXRlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVfY29tcGxldGUuZW1pdChcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgYXMgRXZlbnRFbWl0S2V5PFwiZmlsZV9jb21wbGV0ZVwiPlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjYXNlIFwiY29tcGxldGVcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGUuZW1pdCh2YWx1ZSBhcyBFdmVudEVtaXRLZXk8XCJjb21wbGV0ZVwiPik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgb24sXG4gICAgICAgIG9mZixcbiAgICAgICAgb2ZmQWxsLFxuICAgICAgICBlbWl0LFxuICAgIH07XG59O1xuIiwiaW1wb3J0IHsgRXZlbnRFbWl0S2V5LCBFdmVudEVtaXRUeXBlLCBMb2FkZWRGaWxlIH0gZnJvbSBcIi4vdHlwZVwiO1xuXG5jb25zdCBTaW5nbGVMb2FkZXIgPSAoXG4gICAgZmlsZTogc3RyaW5nLFxuICAgIHByb2dyZXNzOiAoKSA9PiB2b2lkLFxuICAgIGNvbXBsZXRlOiAoZmlsZTogc3RyaW5nLCBzaXplOiBudW1iZXIpID0+IHZvaWQsXG4gICAgZXJyb3I6ICgpID0+IHZvaWRcbikgPT4ge1xuICAgIGxldCBfdG90YWwgPSAwO1xuICAgIGxldCBfY3VycmVudCA9IDA7XG4gICAgbGV0IF9yZWFkeSA9IGZhbHNlO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQ6ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oXCJnZXRcIiwgZmlsZSwgdHJ1ZSk7XG4gICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJibG9iXCI7XG5cbiAgICAgICAgICAgIHhoci5vbnByb2dyZXNzID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWUubGVuZ3RoQ29tcHV0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9yZWFkeSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBfdG90YWwgPSBlLnRvdGFsO1xuICAgICAgICAgICAgICAgIF9jdXJyZW50ID0gZS5sb2FkZWQ7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbXBsZXRlKGZpbGUsIF90b3RhbCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3IoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsOiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gX3RvdGFsO1xuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50OiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gX2N1cnJlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHJlYWR5OiAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gX3JlYWR5O1xuICAgICAgICB9LFxuICAgIH07XG59O1xudHlwZSBTaW5nbGVMb2FkZXJUeXBlID0gUmV0dXJuVHlwZTx0eXBlb2YgU2luZ2xlTG9hZGVyPjtcblxuZXhwb3J0IGNvbnN0IExvYWRlciA9IChcbiAgICBmaWxlczogc3RyaW5nW10sXG4gICAgZW1pdDogPEsgZXh0ZW5kcyBFdmVudEVtaXRUeXBlPihrZXk6IEssIHZhbHVlOiBFdmVudEVtaXRLZXk8Sz4pID0+IHZvaWRcbikgPT4ge1xuICAgIGxldCBmaWxlTGVuZ3RoID0gZmlsZXMubGVuZ3RoO1xuICAgIGNvbnN0IGxvYWRlcnM6IFNpbmdsZUxvYWRlclR5cGVbXSA9IFtdO1xuXG4gICAgbGV0IGZpbGVSZXN1bHRzOiBMb2FkZWRGaWxlW10gPSBmaWxlcy5tYXAoKGZpbGUpID0+ICh7IGZpbGUsIHNpemU6IDAgfSkpO1xuXG4gICAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgICBjb25zdCBsb2FkZXIgPSBTaW5nbGVMb2FkZXIoXG4gICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZWFkeSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBsb2FkZXJzLnJlZHVjZShcbiAgICAgICAgICAgICAgICAgICAgKGFjYywgY3VyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2MudG90YWwgKz0gY3VyLnRvdGFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2MuY3VycmVudCArPSBjdXIuY3VycmVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZHkgPSByZWFkeSAmJiBjdXIucmVhZHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgdG90YWw6IDAsIGN1cnJlbnQ6IDAsIHBlcjogMCB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZWFkeSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucGVyID0gcmVzdWx0LmN1cnJlbnQgLyByZXN1bHQudG90YWw7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoXCJwcm9ncmVzc1wiLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZmlsZSwgc2l6ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGVtaXQoXCJmaWxlX2NvbXBsZXRlXCIsIHsgZmlsZSwgc2l6ZSB9KTtcblxuICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgICAgICAgICAgZmlsZVJlc3VsdHMgPSBmaWxlUmVzdWx0cy5tYXAoKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBfc2l6ZSA9IGZpbGUgPT09IHJlcy5maWxlID8gc2l6ZSA6IHJlcy5zaXplO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbCArPSBfc2l6ZTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZTogcmVzLmZpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBfc2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZpbGVMZW5ndGggLT0gMTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtaXQoXCJjb21wbGV0ZVwiLCB7IHRvdGFsLCBmaWxlczogZmlsZVJlc3VsdHMgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBlbWl0KFwiZXJyb3JcIiwgbmV3IEVycm9yKFwiZXJyb3JcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBsb2FkZXJzLnB1c2gobG9hZGVyKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgICBsb2FkZXJzLmZvckVhY2goKGxvYWRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGxvYWRlci5zdGFydCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn07XG4iLCJpbXBvcnQgeyBwcmVwYXJlRXZlbnQgfSBmcm9tIFwiLi9FdmVudFwiO1xuaW1wb3J0IHsgTG9hZGVyIH0gZnJvbSBcIi4vTG9hZGVyXCI7XG5cbmV4cG9ydCBjb25zdCBCYWNrc3RhZ2UgPSAoZmlsZXM6IHN0cmluZ1tdKSA9PiB7XG4gICAgY29uc3QgeyBvbiwgb2ZmLCBvZmZBbGwsIGVtaXQgfSA9IHByZXBhcmVFdmVudCgpO1xuICAgIGNvbnN0IGxvYWRlciA9IExvYWRlcihmaWxlcywgZW1pdCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBvbixcbiAgICAgICAgb2ZmLFxuICAgICAgICBvZmZBbGwsXG4gICAgICAgIHN0YXJ0OiBsb2FkZXIuc3RhcnQsXG4gICAgfTtcbn07XG4iXSwibmFtZXMiOlsiZXZlbnRtaXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUdPLElBQU0sWUFBWSxHQUFHLFlBQUE7QUFDeEIsSUFBQSxJQUFNLFFBQVEsR0FBR0EsaUJBQVEsRUFBNEIsQ0FBQztBQUN0RCxJQUFBLElBQU0sS0FBSyxHQUFHQSxpQkFBUSxFQUF5QixDQUFDO0FBQ2hELElBQUEsSUFBTSxhQUFhLEdBQUdBLGlCQUFRLEVBQWlDLENBQUM7QUFDaEUsSUFBQSxJQUFNLFFBQVEsR0FBR0EsaUJBQVEsRUFBNEIsQ0FBQztBQUV0RCxJQUFBLElBQU0sRUFBRSxHQUFHLFVBQ1AsR0FBTSxF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
